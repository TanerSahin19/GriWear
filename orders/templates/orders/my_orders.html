{% extends "base.html" %} {% block content %}
<div class="container py-4">
  <!-- =========================================================
       1) SAYFA BAŞLIĞI — NEDEN?
       Kullanıcı nerede olduğunu net görsün.
       ========================================================= -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">Siparişlerim</h2>

    <!-- (Opsiyonel) Kullanıcı alışverişe dönsün: link adını projenize göre değiştirirsiniz -->
  </div>

  <!-- =========================================================
       2) SİPARİŞ VAR MI? — NEDEN?
       Boş ekran bırakmak yerine net bilgi veriyoruz.
       ========================================================= -->
  {% if orders %}

  <!-- =========================================================
         3) LİSTE GRUP — NEDEN?
         Basit, temiz, mobil uyumlu.
         ========================================================= -->
  <div class="list-group">
    {% for order in orders %}
    <!-- =====================================================
             HER SİPARİŞ SATIRI
             - Satır tıklanınca detay sayfasına gider
             - Sağda durum + toplam + detay butonu var
             ===================================================== -->
    <div class="list-group-item">
      <div
        class="d-flex justify-content-between align-items-center flex-wrap gap-2"
      >
        <!-- SOL: Sipariş numarası + tarih -->
        <div>
          <div class="fw-semibold">Sipariş #{{ order.id }}</div>
          <div class="text-muted small">
            {{ order.created_at|date:"d.m.Y H:i" }}
          </div>
        </div>

        <!-- SAĞ: Durum badge + toplam + detay -->
        <div class="d-flex align-items-center gap-2">
          <!-- =================================================
                   DURUM BADGE — NEDEN?
                   Kullanıcı tek bakışta anlasın.
                   Status'a göre renk değiştiriyoruz.
                   ================================================= -->
          <span class="badge {{ order.status_badge_class }}">
            {{ order.get_status_display }}
          </span>

          <!-- TOPLAM — NEDEN floatformat?
                   Para formatı her yerde tutarlı dursun. -->
          <div class="fw-bold">{{ order.total|floatformat:2 }} ₺</div>

          <!-- DETAY BUTONU — NEDEN?
                   Kullanıcı açıkça "buraya bas" görsün. -->
          <a
            href="{% url 'orders:order_detail' order.id %}"
            class="btn btn-sm btn-outline-dark"
          >
            Detay
          </a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% else %}
  <!-- =========================================================
         4) HİÇ SİPARİŞ YOKSA — NEDEN?
         Net mesaj ver, kullanıcı ne yapacağını anlasın.
         ========================================================= -->
  <div class="alert alert-light border">Henüz hiç siparişiniz yok.</div>
  {% endif %}
</div>
{% endblock %}
