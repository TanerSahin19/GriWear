{% extends "base.html" %}
{% block title %}Checkout{% endblock %}

{% block content %}
<div class="container py-4">

  <!-- ‚úÖ Ba≈ülƒ±k: Kullanƒ±cƒ±ya "Sipari≈ü adƒ±mƒ±ndasƒ±n" der -->
  <h2 class="fw-bold mb-3">Checkout</h2>

  <div class="row g-4">

    <div class="col-lg-7">
      <!-- üë§ Teslimat Bilgileri: Sipari≈üin nereye gideceƒüini almak i√ßin -->
      <div class="card">
        <div class="card-body">
          <h5 class="mb-3">Teslimat Bilgileri</h5>

          <!-- ‚úÖ Form POST: Sipari≈ü kaydƒ± yazacaƒüƒ±mƒ±z i√ßin post kullanƒ±yoruz -->
          <form method="post">
            {% csrf_token %}

            <!-- ‚úÖ Ad Soyad -->
            <div class="mb-3">
              <label class="form-label">Ad Soyad</label>
              {{ form.full_name }}
            </div>

            <!-- ‚úÖ Telefon -->
            <div class="mb-3">
              <label class="form-label">Telefon</label>
              {{ form.phone }}
            </div>

            <!-- ‚úÖ Adres -->
            <div class="mb-3">
              <label class="form-label">Adres</label>
              {{ form.address }}
            </div>

            <!-- ‚úÖ Sipari≈üi Tamamla: Order + OrderItem yazƒ±lƒ±r, sepet temizlenir -->
            <button type="submit" class="btn btn-dark">Sipari≈üi Tamamla</button>
          </form>

        </div>
      </div>
    </div>

    <div class="col-lg-5">
      <!-- üßæ Sipari≈ü √ñzeti: View hesapladƒ±, burada sadece g√∂steriyoruz -->
      <div class="card">
        <div class="card-body">
          <h5 class="mb-3">Sipari≈ü √ñzeti</h5>

          {% for row in items %}
            <div class="d-flex justify-content-between align-items-center mb-2">
              <div>
                <div class="fw-semibold">{{ row.product.name }}</div>
                <div class="text-muted small">Adet: {{ row.quantity }}</div>
              </div>
              <div class="fw-bold">{{ row.line_total }} ‚Ç∫</div>
            </div>
          {% endfor %}

          <hr>

          <!-- ‚úÖ Toplam -->
          <div class="d-flex justify-content-between">
            <span class="fw-bold">Toplam</span>
            <span class="fw-bold">{{ total }} ‚Ç∫</span>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
