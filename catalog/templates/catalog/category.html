{% extends "base.html" %}

{% block content %}
<div class="container py-4">
  <div class="d-flex align-items-end justify-content-between mb-3">
    <div>
      <p class="text-muted mb-1">Kategori</p>
      <p class="text-muted mb-0">{{ products|length }} ürün</p>
      <h2 class="mb-0 fw-bold">{{ category.name }}</h2>
    </div>
  </div>

  <hr class="mt-3 mb-4">

  <div class="row g-3">
    {% for p in products %}
      <div class="col-6 col-md-4 col-lg-3">

        {# NEDEN: Kart bir ürünü temsil eder; tamamı detaya akmalı #}
        <a href="{% url 'catalog:product_detail' p.slug %}"
           class="text-decoration-none text-dark">

          <div class="card h-100">

            {% if p.image %}
              <img src="{{ p.image.url }}"
                   class="card-img-top w-100"
                   alt="{{ p.name }}"
                   style="height:260px; object-fit:cover; object-position:center;">
            {% endif %}

            <div class="card-body">
              <h6 class="card-title mb-1">{{ p.name }}</h6>
              <div class="fw-bold">{{ p.price }} ₺</div>

              {# NEDEN: is_new link kontrolü değildir; sadece etiket/rozet olmalı #}
              {% if p.is_new %}
                <span class="badge bg-dark mt-2">Yeni</span>
              {% endif %}

              <div class="mt-2">
                <span class="btn btn-sm btn-outline-dark">Detay</span>
              </div>
            </div>

          </div>
        </a>

      </div>
    {% empty %}
      <p>Bu kategoride ürün yok.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
